<!--Current as of 16-DEC-2025-->
    
<!--This section is for webpage styling-->

<html>
<head>
<meta charset="utf-8">
<title>Sample Heavy Metal Elemetal Analysis (HM EA) Data Entry Form
<style>
body {
  font-family: Arial, sans-serif;
  background-color: #F7F2EE;
  color: #312417;
}

/*collapsible section styling*/
.collapsible-section {
  border: 2px solid #d8cbb5;
  border-radius: 6px;
  margin: 15px 0;
  padding: 0;
  background-color: #fff;
}
.collapsible-header {
  background-color: #f0e3cc;
  padding: 12px 15px;
  cursor: pointer;
  font-weight: bold;
  display: flex;
  justify-content: space-between;
  align-items: center;
  user-select: none;
  border-radius: 4px 4px 0 0;
}
.collapsible-header:hover {
  background-color: #d8cbb5;
}
.collapsible-arrow {
  font-size: 14px;
  transition: transform 0.3s;
}
.collapsible-arrow.collapsed {
  transform: rotate(-90deg);
}
.collapsible-content {
  padding: 15px;
  display: grid;
  gap: 10px;
}
.collapsible-content.hidden {
  display: none;
}

/*static/box section styling*/
.static-section {
  border: 2px solid #d8cbb5;
  border-radius: 6px;
  margin: 15px 0;
  padding: 0;
  background-color: #fff;
}
.static-header {
  background-color: #f0e3cc;
  padding: 12px 15px;
  font-weight: bold;
  border-radius: 4px 4px 0 0;
}
.static-content {
  padding: 15px;
  display: grid;
  gap: 10px;
}
</style>
</head>
<body>

<form id="f" style="max-width:650px;margin:24px auto;display:grid;gap:10px">
  <h1 style="text-align: center; font-size: 32px; margin-bottom: 15px;">Sample Heavy Metal Elemental Analysis Entry Form</h1>

  <div id="statusMessage"></div>

<!--references for creating boxes- good to copy/paste-->

<!--STATIC BOX
<div class="static-section">
    <div class="static-header">
        <span>NAME</span>
    </div>
    <div class="static-content">
        FIELDS
    </div>
</div>
-->

<!-- COLLAPSABLE BOX
<div class="collapsible-section">
    <div class="collapsible-header" onclick="toggleSection(this)">
        <span>NAME</span>
        <span class="collapsible-arrow">▼</span>
    </div>
    <div class="collapsible-content">
        FIELDS
    </div>
</div>
-->

<!--this is where the form actually begins-->

<!--Catagory: Sample Heavy Metal Elemental Analysis Identifying Informatiom-->

<div class="static-section">
    <div class="static-header">
        <span>Heavy Metal Elemental Analysis Sample Identifying Information</span>
    </div>
    <div class="static-content">
        <label>SDB Sample ID
            <input name="sdb_smiid_ref" type="text" required>
        </label>

        <label>SDB HM EA ID
            <input name="sdb_hmeaiid" type="text" required>
        </label>

        <label>Entry date
            <input name="hmea_entry_dts" type="dts" required>
        </label>
    </div>
</div>

<!--Catagory: HM EA Elements and Quantities-->

<div class="collapsible-section">
    <div class="collapsible-header" onclick="toggleSection(this)">
        <span>Catagory: HM EA Elements and Quantites</span>
        <span class="collapsible-arrow">▼</span>
    </div>
    <div class="collapsible-content"> 

        <label>Lead ppm
            <input name="hm_ea_pb" type="number">
        </label>

        <div class="collapsible-section">
            <div class="collapsible-header" onclick="toggleSection(this)">
                <span>Other elements</span>
                <span class="collapsible-arrow">▼</span>
            </div>
            <div class="collapsible-content">

                <label>Aluminum ppm
                    <input name="hm_ea_al" type="number">
                </label>

                <label>Silicon ppm
                    <input name="hm_ea_si" type="number">
                </label>

                <label>Phosphorous ppm
                    <input name="hm_ea_p" type="number">
                </label>

                <label>Sulfur ppm
                    <input name="hm_ea_s" type="number">
                </label>

                <label>Chlorine ppm
                    <input name="hm_ea_cl" type="number">
                </label>

                <label>Potassium ppm
                    <input name="hm_ea_k" type="number">
                </label>

                <label>Calcium ppm
                    <input name="hm_ea_ca" type="number">
                </label>

                <label>Titanium ppm
                    <input name="hm_ea_ti" type="number">
                </label>

                <label>Vanadium ppm
                    <input name="hm_ea_v" type="number">
                </label>

                <label>Chromium ppm
                    <input name="hm_ea_cr" type="number">
                </label>

                <label>Manganese ppm
                    <input name="hm_ea_mn" type="number">
                </label>

                <label>Iron ppm
                    <input name="hm_ea_fe" type="number">
                </label>

                <label>Cobalt ppm
                    <input name="hm_ea_co" type="number">
                </label>

                <label>Nitrogen ppm
                    <input name="hm_ea_n" type="number">
                </label>

                <label>Nickle ppm
                    <input name="hm_ea_ni" type="number">
                </label>

                <label>Copper ppm
                    <input name="hm_ea_cu" type="number">
                </label>

                <label>Zinc ppm
                    <input name="hm_ea_zn" type="number">
                </label>

                <label>Arsenic ppm
                    <input name="hm_ea_as" type="number">
                </label>

                <label>Selenium ppm
                    <input name="hm_ea_se" type="number">
                </label>

                <label>Rubidium ppm
                    <input name="hm_ea_rb" type="number">
                </label>

                <label>Strontium ppm
                    <input name="hm_ea_sr" type="number">
                </label>

                <label>Yttrium ppm
                    <input name="hm_ea_y" type="number">
                </label>

                <label>Zicronium ppm
                    <input name="hm_ea_zr" type="number">
                </label>

                <label>Molybdenum ppm
                    <input name="hm_ea_mo" type="number">
                </label>

                <label>Siver ppm
                    <input name="hm_ea_ag" type="number">
                </label>

                <label>Cadmium ppm
                    <input name="hm_ea_cd" type="number">
                </label>

                <label>Tin ppm
                    <input name="hm_ea_sn" type="number">
                </label>

                <label>Antimony ppm
                    <input name="hm_ea_sb" type="number">
                </label>

                <label>Hafnium ppm
                    <input name="hm_ea_hf" type="number">
                </label>

                <label>Tungsten ppm
                    <input name="hm_ea_w" type="number">
                </label>

                <label>Mercury ppm
                    <input name="hm_ea_hg" type="number">
                </label>

                <label>Bismuth ppm
                    <input name="hm_ea_bi" type="number">
                </label>

                <label>Thorium ppm
                    <input name="hm_ea_th" type="number">
                </label>

                <label>Uranium ppm
                    <input name="hm_ea_u" type="number">
                </label>

                <label>Lanthanum ppm
                    <input name="hm_ea_le" type="number">
                </label>
            </div>
        </div>
    </div>
</div>


<!--This is the save button at the end of the form, needs work-->
 
  <button>Save</button>
  <pre id="out"></pre>
</form>
<script>
const API = "https://673mmzj2a6.execute-api.us-east-2.amazonaws.com/prod";
document.getElementById('f').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const outEl = document.getElementById('out');
  outEl.textContent = "Submitting...";
  
  const fd = new FormData(e.target), body={}; 
  fd.forEach((v,k)=> body[k]=v||null);
  
  try {
    const r = await fetch(API + "/projects", { 
      method:'POST', 
      headers:{'content-type':'application/json'}, 
      body: JSON.stringify(body) 
    });
    
    const responseText = await r.text();
    outEl.textContent = responseText;
    
    // Try to parse and show more communactive messages
    try {
      const json = JSON.parse(responseText);
      if (json.ok) {
        outEl.textContent = "✓ SUCCESS: Project saved! ID: " + json.sdb_projiid;
        outEl.style.color = "green";
      } else {
        outEl.textContent = "✗ ERROR: " + json.error;
        outEl.style.color = "red";
      }
    } catch (e) {
      // If not JSON, just show the text
      outEl.style.color = "black";
    }
  } catch (err) {
    outEl.textContent = "✗ NETWORK ERROR: " + err.message;
    outEl.style.color = "red";
  }
});

// Function to toggle collapsible sections
function toggleSection(header) {
  const content = header.nextElementSibling;
  const arrow = header.querySelector('.collapsible-arrow');
  
  content.classList.toggle('hidden');
  arrow.classList.toggle('collapsed');
}

// Start all collapsible sections closed
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.collapsible-content').forEach(content => {
    content.classList.add('hidden');
    content.previousElementSibling.querySelector('.collapsible-arrow').classList.add('collapsed');
  });
});

</script>
</body>
</html>